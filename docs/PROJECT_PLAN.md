## **项目开发计划 (Project Development Plan)**

**版本**: 1.1
**文档状态**: 迭代中

### **Phase 1: 核心框架与工具搭建 (MVP 基础)**
*   [x] 1.1: 初始化 Python 项目结构，配置 `Poetry` 或 `pip`。
*   [x] 1.2: 使用 `Typer` 搭建基础的 CLI 入口。
*   [x] 1.3: 封装文件系统工具（`read`, `write`, `list_dir`）。
*   [x] 1.4: 封装 LLM API 通信模块，处理对 Gemini API 的调用。

### **Phase 2: 单 Agent 工作流实现 (Alpha 版)**
*   [x] 2.1: 实现 `ContextCollector`，能够读取指定文件和目录。
*   [x] 2.2: 实现一个简化的 `DeveloperAgent`，能够接收一个包含上下文的 Prompt 并返回代码。
*   [x] 2.3: 实现一个简化的 `MCP_Core`，打通从 CLI -> `ContextCollector` -> `DeveloperAgent` -> 输出的流程。

### **Phase 3: 多智能体协作 (Beta 版 - 核心功能)**
*   [x] 3.1: 实现 `ReviewerAgent`，赋予其编写测试和审查代码的能力。
*   [x] 3.2: 使用 `Pydantic` 定义 Agent 间通信的数据模型（测试用例、批判报告等）。
*   [x] 3.3: 在 `MCP_Core` 中实现完整的“TDD+辩论”工作流。

### **Phase 4: 高级功能与优化 (V1.0)**
*   [x] 4.1: 实现 `ConstitutionGenerator`，完成动态“宪法”功能。
*   [x] 4.2: 在 `MCP_Core` 的关键节点添加“人机协同”的暂停和输入接口。
*   [x] 4.3: 进行性能与成本优化，引入模型选择逻辑。

### **已完成的深化与迭代 (V1.0 增强)**
*   [x] **深化辩论循环**: 将 `MCP_Core` 中的辩论循环升级为多轮（最多N轮），并引入人类仲裁机制。
*   [x] **反共谋设计**: 为 `DeveloperAgent` 和 `ReviewerAgent` 注入独立的、目标相反的“个人宪法”，作为“交叉验证”的第一步。

### **待处理任务 (搁置)**
*   [ ] **端到端测试与调试**: 由于环境问题，目前无法进行运行时测试。此任务暂时搁置，待环境问题解决后执行。

### **未来迭代方向 (V1.1+)**
*   [ ] **模型多样性**: 为 `DeveloperAgent` 和 `ReviewerAgent` 分配不同的 LLM 模型，实现真正的“交叉验证”（反共谋的第二步）。
*   [ ] **情景记忆持久化**: 将 Agent 的情景记忆（辩论历史、决策日志）持久化到本地文件系统，实现“永不失忆”。
*   [ ] **语义记忆 (RAG)**: 实现代码库的向量化和语义检索，提供对整个项目更深层次的理解。
*   [ ] **更复杂的上下文管理**: 优化上下文过滤和压缩策略，支持更大规模的项目。
*   [ ] **更多 Agent 角色**: 引入新的 Agent 角色（如“架构师 Agent”、“文档 Agent”）。
*   [ ] **CLI 优化**: 提升用户体验，增加更多命令行选项和友好的输出。
